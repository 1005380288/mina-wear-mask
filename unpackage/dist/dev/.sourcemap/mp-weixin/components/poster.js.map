{"version":3,"sources":["webpack:////Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue?7b88","webpack:////Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue?a605","webpack:////Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue?0a87","webpack:////Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue?ab91","webpack:////Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue","webpack:////Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue?3f29","webpack:////Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue?4ec6"],"names":["props","bgImg","type","String","default","data","avatarUrl","cansWidth","cansHeight","computed","bgImgUrl","console","log","watch","newBgImg","self","uni","downloadFile","url","success","res","ctx","drawImage","tempFilePath","wishWordBg","wishWord","created","createCanvasContext","drawBaseBg","today","year","Date","getFullYear","month","getMonth","date","getDate","time","bgColor","rect","setFillStyle","fill","draw","roundBoarder","drawText","text","sLeft","sTop","fontSize","color","bold","lineHeight","sColor","fColor","x","y","r","Math","ceil","save","d","cx","cy","arc","PI","setLineWidth","setStrokeStyle","stroke","restore","circleImg","img","getImageInfo","src","then","image","path","clip","closeCans","$parent","posterShow","saveCans","showLoading","title","mask","canvasToTempFilePath","width","height","destWidth","destHeight","canvasId","hideLoading","saveImageToPhotosAlbum","filePath","showToast","fail","errMsg","showModal","confirm","openSetting","drawPara","item","redIndexObj","redWord","length","i","startIndex","index","para","indexOf","j","font","isLeft","sMaxWidth","maxWidth","floor","tempList","split","nowText","isCol","textWidth","measureText","redColor","fillText","titleHeight","drawBg","sWidth","sHeight","setFontSize","Array","getAvatar","result","detail","content","showCancel","hasUserInfo","userInfo","replace"],"mappings":"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","file":"components/poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./poster.vue?vue&type=template&id=5fc6d8d9&scoped=true&\"\nvar renderjs\nimport script from \"./poster.vue?vue&type=script&lang=js&\"\nexport * from \"./poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./poster.vue?vue&type=style&index=0&id=5fc6d8d9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fc6d8d9\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5fc6d8d9')) {\n      api.createRecord('5fc6d8d9', component.options)\n    } else {\n      api.reload('5fc6d8d9', component.options)\n    }\n    module.hot.accept(\"./poster.vue?vue&type=template&id=5fc6d8d9&scoped=true&\", function () {\n      api.rerender('5fc6d8d9', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/yulei/Documents/HBuilderProjects/newyear-wish/components/poster.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=template&id=5fc6d8d9&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: {\n\t\tbgImg: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tavatarUrl: '',\n\t\t\t// 海报\n\t\t\tcansWidth: 270, //海报宽度\n\t\t\tcansHeight: 270 //海报高度\n\t\t\t// 海报\n\t\t};\n\t},\n\tcomputed: {\n\t\tbgImgUrl() {\n\t\t\tconsole.log('bgImg', this.bgImg);\n\t\t\tif (this.bgImg) {\n\t\t\t\treturn this.bgImg;\n\t\t\t}\n\t\t\treturn '/static/image/location.png';\n\t\t}\n\t},\n\twatch: {\n\t\tavatarUrl: function(newBgImg) {\n\t\t\tlet self = this;\n\t\t\t\n\t\t\tuni.downloadFile({\n\t\t\t\turl: newBgImg,\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t// self.drawBg({\n\t\t\t\t\t// \turl: res.tempFilePath,\n\t\t\t\t\t// \tsLeft: 0,\n\t\t\t\t\t// \tsTop: 0,\n\t\t\t\t\t// \tsWidth: 1,\n\t\t\t\t\t// \tsHeight: 0.75\n\t\t\t\t\t// })\n\t\t\t\t\tself.ctx.drawImage(res.tempFilePath,0,0, self.cansWidth, self.cansHeight);\n\t\t\t\t\tself.wishWordBg();\n\t\t\t\t\tself.wishWord();\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tconsole.log(\"newBgImg\", newBgImg);\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.ctx = uni.createCanvasContext('wish-poster', this);\n\t\t//绘制底色为白色\n\t\tthis.drawBaseBg('#FFD314');\n\t\tthis.wishWordBg();\n\t\tthis.wishWord();\n\t},\n\tcomputed: {\n\t\ttoday() {\n\t\t\tlet year = new Date().getFullYear();\n\t\t\tlet month = new Date().getMonth() + 1\n\t\t\tlet date = new Date().getDate()\n\t\t\tlet time = year + \"年\" + month + \"月\" + date + \"日\"\n\t\t\treturn time\n\t\t}\n\t},\n\tmethods: {\n\t\tdrawBaseBg(bgColor) {\n\t\t\tthis.ctx.rect(0, 0, this.cansWidth, this.cansHeight)\n\t\t\tthis.ctx.setFillStyle(bgColor)\n\t\t\tthis.ctx.fill()\n\t\t\tthis.ctx.draw(true)\n\t\t},\n\t\twishWordBg() {\n\t\t\tthis.roundBoarder('white', '#f3a32b', .7, .7, 40);\n\t\t},\n\t\twishWord(){\n\t\t\tthis.drawText({\n\t\t\t\ttext: '福',\n\t\t\t\t// text: '我是标题',\n\t\t\t\tsLeft: 0.77,\n\t\t\t\tsTop: 0.91,\n\t\t\t\tfontSize: 42,\n\t\t\t\tcolor: 'white',\n\t\t\t\tbold: true,\n\t\t\t\tlineHeight: 12\n\t\t\t})\n\t\t},\n\t\troundBoarder(sColor, fColor, x, y, r){\n\t\t\tx = Math.ceil(this.cansWidth * x)\n\t\t\ty = Math.ceil(this.cansHeight * y)\n\t\t\tthis.ctx.save();\n\t\t\tvar d = 2 * r;\n\t\t\tvar cx = x + r;\n\t\t\tvar cy = y + r;\n\t\t\tthis.ctx.arc(cx, cy, r, 0, 2 * Math.PI);\n\t\t\tthis.ctx.setLineWidth(15);\n\t\t\tthis.ctx.setStrokeStyle(sColor);\n\t\t\tthis.ctx.stroke();\n\t\t\tthis.ctx.setFillStyle(fColor);\n\t\t\tthis.ctx.fill();\n\t\t\tthis.ctx.restore();\n\t\t\tthis.ctx.draw(true);\n\t\t},\n\t\tcircleImg(img, x, y, r) {\n\t\t\tuni.getImageInfo({\n\t\t\t\tsrc: img\n\t\t\t}).then((image) => {\n\t\t\t\tconsole.log(image[1].path)\n\t\t\t\tx = Math.ceil(this.cansWidth * x)\n\t\t\t\ty = Math.ceil(this.cansHeight * y)\n\t\t\t\tthis.ctx.save();\n\t\t\t\tvar d = 2 * r;\n\t\t\t\tvar cx = x + r;\n\t\t\t\tvar cy = y + r;\n\t\t\t\tthis.ctx.arc(cx, cy, r, 0, 2 * Math.PI);\n\t\t\t\tthis.ctx.clip();\n\t\t\t\tthis.ctx.drawImage(image[1].path, x, y, d, d);\n\t\t\t\tthis.ctx.restore();\n\t\t\t\tthis.ctx.draw(true);\n\t\t\t})\n\t\t},\n\t\tcloseCans() {\n\t\t\tthis.$parent.posterShow = false\n\t\t},\n\t\tsaveCans() {\n\t\t\tconsole.log('保存')\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '保存ing...',\n\t\t\t\tmask: true\n\t\t\t})\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\twidth: this.cansWidth * 1.5,\n\t\t\t\theight: this.cansHeight * 1.5,\n\t\t\t\tdestWidth: this.cansWidth * 3,\n\t\t\t\tdestHeight: this.cansHeight * 3,\n\t\t\t\tcanvasId: 'wish-poster',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '保存相册成功'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tconsole.log('save success')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\tif (res.errMsg == \"saveImageToPhotosAlbum:fail auth deny\") {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '您需要授权相册权限',\n\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}\n\t\t\t}, this)\n\t\t},\n\t\tdrawPara(item) {\n\t\t\tvar redIndexObj = {}\n\t\t\tif (item.redWord.length > 0) {\n\t\t\t\tfor (var i = 0; i < item.redWord.length; i++) {\n\t\t\t\t\tlet startIndex = 0,\n\t\t\t\t\t\tindex;\n\t\t\t\t\twhile ((index = item.para.indexOf(item.redWord[i], startIndex)) > -1) {\n\t\t\t\t\t\tredIndexObj[index] = true;\n\t\t\t\t\t\tfor (var j = 0; j < item.redWord[i].length; j++) {\n\t\t\t\t\t\t\tredIndexObj[index + j] = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstartIndex = index + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.ctx.font = `normal normal ${item.fontSize}px sans-serif`;\n\t\t\tthis.ctx.setFillStyle(item.color)\n\t\t\tvar isLeft\n\t\t\tif (item.sLeft == 'center') {\n\t\t\t\tisLeft = this.cansWidth * (.5 - item.sMaxWidth / 2) - item.fontSize\n\t\t\t} else {\n\t\t\t\tisLeft = item.sLeft * this.cansWidth\n\t\t\t}\n\t\t\tvar maxWidth = Math.floor(this.cansWidth * item.sMaxWidth)\n\t\t\tvar tempList = item.para.split('')\n\t\t\tvar nowText = '',\n\t\t\t\tisCol = 0,\n\t\t\t\ttextWidth = 0\n\t\t\tfor (var i = 0; i < tempList.length; i++) {\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tnowText += tempList[i - 1]\n\t\t\t\t} else {\n\t\t\t\t\tnowText += tempList[0]\n\t\t\t\t}\n\t\t\t\ttextWidth = this.ctx.measureText(nowText).width\n\t\t\t\tif (textWidth > maxWidth) {\n\t\t\t\t\tisCol++\n\t\t\t\t\tnowText = '占'\n\t\t\t\t\ttextWidth = this.ctx.measureText(nowText).width\n\t\t\t\t}\n\t\t\t\tif (redIndexObj[i]) {\n\t\t\t\t\tthis.ctx.save()\n\t\t\t\t\tif (item.bold) this.ctx.font = `normal bold ${item.fontSize}px sans-serif`;\n\t\t\t\t\tthis.ctx.setFillStyle(item.redColor)\n\t\t\t\t}\n\t\t\t\tthis.ctx.fillText(tempList[i], isLeft + textWidth, item.sTop * this.cansHeight + item.titleHeight * isCol)\n\t\t\t\tthis.ctx.restore()\n\t\t\t}\n\t\t\tthis.ctx.draw(true)\n\t\t},\n\t\tdrawBg(item) {\n\t\t\tif (item.sLeft == 'center') {\n\t\t\t\tthis.ctx.drawImage(item.url, this.cansWidth * (.5 - item.sWidth / 2), this.cansHeight * item.sTop, this.cansWidth *\n\t\t\t\t\titem.sWidth, this.cansHeight * item.sHeight);\n\t\t\t} else {\n\t\t\t\tthis.ctx.drawImage(item.url, this.cansWidth * item.sLeft, this.cansHeight * item.sTop, this.cansWidth * item.sWidth,\n\t\t\t\t\tthis.cansHeight * item.sHeight);\n\t\t\t}\n\t\t\tthis.ctx.draw(true);\n\t\t},\n\t\tdrawText(item) {\n\t\t\tvar isLeft\n\t\t\tif (item.sLeft == 'center') {\n\t\t\t\tisLeft = this.cansWidth * .5 - (item.fontSize * item.text.length) / 2\n\t\t\t} else {\n\t\t\t\tisLeft = item.sLeft * this.cansWidth\n\t\t\t}\n\t\t\tthis.ctx.save()\n\t\t\tif (item.bold) this.ctx.font = `normal bold ${item.fontSize}px sans-serif`;\n\t\t\tthis.ctx.setFillStyle(item.color)\n\t\t\tthis.ctx.setFontSize(item.fontSize)\n\t\t\tif (item.text instanceof Array) {\n\t\t\t\tif (!item.lineHeight) item.lineHeight = item.fontSize + 2\n\t\t\t\tconsole.log('我是数组', item.text)\n\t\t\t\tfor (var i = 0; i < item.text.length; i++) {\n\t\t\t\t\tthis.ctx.fillText(item.text[i], isLeft, item.sTop * this.cansHeight + item.lineHeight * i)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.log('我是字符串', item.text)\n\t\t\t\tthis.ctx.fillText(item.text, isLeft, item.sTop * this.cansHeight)\n\t\t\t}\n\t\t\tthis.ctx.draw(true)\n\t\t\tthis.ctx.restore()\n\t\t},\n\t\tgetAvatar(result) {\n\t\t\tconsole.log('mpGetUserInfo', result);\n\t\t\tif (result.detail.errMsg !== 'getUserInfo:ok') {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '获取用户信息失败',\n\t\t\t\t\tcontent: '错误原因' + result.detail.errMsg,\n\t\t\t\t\tshowCancel: false\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hasUserInfo = true;\n\t\t\tthis.userInfo = result.detail.userInfo\n\t\t\tthis.userInfo.avatarUrl = this.userInfo.avatarUrl.replace(\"132\", \"0\"); // 959 * 959\n\t\t\tthis.avatarUrl = this.userInfo.avatarUrl;\n\t\t\tconsole.log(this.userInfo);\n\t\t},\n\t}\n}\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=style&index=0&id=5fc6d8d9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster.vue?vue&type=style&index=0&id=5fc6d8d9&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}